[
  {
    "type": "function",
    "function": {
      "name": "analyzeText",
      "description": "Analyze the length of the attached context.",
      "parameters": { "type": "object", "properties": {} }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "loadDocument",
      "description": "Load the full document.",
      "parameters": { "type": "object", "properties": {} }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "buildIndex",
      "description": "Split the document into fixed-size chunks and build a searchable index.",
      "parameters": {
        "type": "object",
        "properties": {
          "chunk_size": { "type": "integer", "description": "Chunk size in tokens. Default 4000." },
          "overlap": { "type": "integer", "description": "Number of overlapping tokens between adjacent chunks. Default 0." }
        }
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "checkBudget",
      "description": "Check the remaining context budget.",
      "parameters": { "type": "object", "properties": {} }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "readChunk",
      "description": "Retrieve the full text of a chunk by its 'chunk_id'.",
      "parameters": {
        "type": "object",
        "properties": {
          "chunk_id": { "type": "integer", "description": "ID of the target chunk." }
        },
        "required": ["chunk_id"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "searchEngine",
      "description": "Search the document by keywords and return the information of relevant chunks.",
      "parameters": {
        "type": "object",
        "properties": {
          "keyword": { "type": "string", "description": "Keyword(s) separated with comma." }
        },
        "required": ["keyword"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "note",
      "description": "Record key information in a note.",
      "parameters": {
        "type": "object",
        "properties": {
          "key": { "type": "string", "description": "Unique identifier for the note." },
          "summary": { "type": "string", "description": "Short summary of the note." },
          "content": { 
            "type": "object", 
            "description": "Full note content." 
          }
        },
        "required": ["key", "summary", "content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "readNote",
      "description": "Read the full content of a specified note.",
      "parameters": {
        "type": "object",
        "properties": {
          "key": { "type": "string", "description": "Note key." }
        },
        "required": ["key"]
      }
      }
  },
  {
    "type": "function",
    "function": {
      "name": "updateNote",
      "description": "Overwrite/Append/Delete an existing note.",
      "parameters": {
        "type": "object",
        "properties": {
          "mode": { "type": "string", "description": "'append', 'overwrite', or 'delete'." },
          "key": { "type": "string", "description": "Key of the target note to update." },
          "new_content": { "type": "object", "description": "New content for update. Leave empty for deletion mode." },
          "new_summary": { "type": "string", "description": "New summary for update." }
        },
        "required": ["key", "mode", "new_content"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "mergeNotes",
      "description": "Merge multiple notes into one.",
      "parameters": {
        "type": "object",
        "properties": {
          "keys": { "type": "array", "items": { "type": "string" }, "description": "List of note keys to merge." },
          "new_key": { "type": "string", "description": "Key for the new merged note." },
          "new_summary": { "type": "string", "description": "Summary for the new merged note." }
        },
        "required": ["keys"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "deleteContext",
      "description": "Delete an assistant or tool message by its message ID to save tokens.",
      "parameters": {
        "type": "object",
        "properties": {
          "msg_id": { "type": "integer", "description": "Unique ID of the message to prune." }
        },
      "required": ["msg_id"]
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "getContextStats",
      "description": "Get full statistics about the current working context and stored notes.",
      "parameters": { 
        "type": "object", 
        "properties": {} 
      }
    }
  },
  {
    "type": "function",
    "function": {
      "name": "finish",
      "description": "Submit the final answer.",
      "parameters": {
        "type": "object",
        "properties": {
          "answer": { 
            "type": "string", 
            "description": "Final answer in short form." 
          }
        },
        "required": ["answer"]
      }
    }
  }
]
